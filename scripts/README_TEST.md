# Dify 测试脚本使用指南

## 简单测试脚本 (simple_dify_test.py)

这是一个简单易懂的 Dify API 测试工具，适合快速验证系统功能。

### 🚀 快速开始

#### 1. 运行预设测试

```bash
python scripts/simple_dify_test.py
```

这会运行3个预设的测试用例：
- 问候测试："你好"
- 知识问答测试："什么是人工智能？"
- 对比问答测试："Python和Java有什么区别？"

#### 2. 交互式测试

```bash
python scripts/simple_dify_test.py interactive
```

进入交互模式，可以手动输入问题进行测试：

```
请输入问题: 什么是机器学习？
[测试结果...]

请输入问题: 深度学习和神经网络的关系？
[测试结果...]

请输入问题: quit
再见！
```

#### 3. 测试自定义问题

```bash
python scripts/simple_dify_test.py custom "什么是深度学习？"
```

直接测试一个特定的问题。

#### 4. 查看帮助

```bash
python scripts/simple_dify_test.py help
```

### 📊 输出示例

```
============================================================
🚀 Dify API 简单测试
============================================================

============================================================
📝 问候测试
============================================================
问题: 你好
等待响应...
✅ 成功 (耗时: 8.61秒)
回答: 你好！很高兴见到你。有什么我可以帮助你的吗？

[... 其他测试 ...]

============================================================
📊 测试总结
============================================================
总测试数: 3
成功: 3 (100.0%)
失败: 0
平均耗时: 8.45秒

🎉 所有测试通过！
============================================================
```

### ✨ 特点

- ✅ **简单易懂** - 代码清晰，约200行
- ✅ **多种模式** - 预设测试、交互式、自定义问题
- ✅ **实时反馈** - 显示测试进度和结果
- ✅ **统计分析** - 自动计算成功率和耗时
- ✅ **友好提示** - 丰富的emoji和格式化输出

### 🔧 配置要求

1. **环境变量**：确保已配置 `.env` 文件
   ```bash
   DIFY_API_KEY=your_api_key
   DIFY_BASE_URL=https://api.dify.ai/v1
   ```

2. **Python依赖**：
   ```bash
   pip install -r requirements.txt
   ```

### 📝 脚本结构

```python
# 主要函数
test_single_query()      # 测试单个查询
run_simple_tests()       # 运行预设测试
interactive_test()       # 交互式测试模式
main()                   # 主函数
```

### 🎯 使用场景

1. **日常开发** - 快速验证代码改动
2. **功能测试** - 测试特定问题的回答质量
3. **性能检查** - 观察响应时间和稳定性
4. **问题排查** - 诊断API连接或配置问题
5. **演示展示** - 展示系统功能

### 💡 提示

- 测试之间会有1秒延迟，避免请求过快
- 回答内容会自动截断显示（最多200字符）
- 可以按 Ctrl+C 随时中断测试
- 交互模式下输入 `quit` 或 `exit` 退出

### 🔗 相关资源

- 详细测试报告: `TEST_STABILITY_REPORT.md`
- 批量测试脚本: `tests/batch_test_dify.py`
- 快速验证脚本: `tests/quick_verify.py`
- WebSocket测试: `scripts/ws_client.py`

---

**维护:** AI Assistant  
**更新日期:** 2025-10-09  
**版本:** 1.0


